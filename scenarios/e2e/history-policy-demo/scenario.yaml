id: history-policy-demo
name: History Policy Demo - Local REST
description: Local REST swarm that sets explicit WorkItem history policies per worker.
template:
  image: swarm-controller:latest
  bees:
    - role: generator
      image: generator:latest
      config:
        inputs:
          scheduler:
            ratePerSec: 5
        worker:
          historyPolicy: FULL
      work:
        out:
          out: gen
    - role: moderator
      image: moderator:latest
      config:
        worker:
          historyPolicy: LATEST_ONLY
      work:
        in:
          in: gen
        out:
          out: mod
    - role: processor
      image: processor:latest
      config:
        worker:
          historyPolicy: DISABLED
      work:
        in:
          in: mod
        out:
          out: final
    - role: postprocessor
      image: postprocessor:latest
      config:
        worker:
          historyPolicy: FULL
          publishAllMetrics: true
      work:
        in:
          in: final

