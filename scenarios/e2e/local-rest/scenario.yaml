id: local-rest
name: Local REST - Simple REST Swarm using custom values
description: Uses local images. Sample scenario that ships the REST generator with a 50 msg/s default rate limit and custom queue names.
template:
  image: swarm-controller:latest
  bees:
    - role: generator
      image: generator:latest
      config:
        inputs:
          scheduler:
            ratePerSec: 50
        worker:
          message:
            bodyType: HTTP
            path: /test
            method: POST
            body: '{"event":"local-rest"}'
            headers:
              content-type: application/json
      work:
        out:
          out: genQ
    - role: moderator
      image: moderator:latest
      config:
        worker:
          mode:
            type: rate-per-sec
            ratePerSec: 10
      work:
        in:
          in: genQ
        out:
          out: modQ
    - role: processor
      image: processor:latest
      config:
        worker:
          baseUrl: "{{ sut.endpoints['default'].baseUrl }}/api"
      work:
        in:
          in: modQ
        out:
          out: finalQ
    - role: postprocessor
      image: postprocessor:latest
      work:
        in:
          in: finalQ
