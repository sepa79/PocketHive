server {
  listen 8089;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  location = /healthz {
    add_header Content-Type text/plain;
    return 200 'ok';
  }

  # Serve the v2 SPA from /v2/*
  location ^~ /v2/ {
    rewrite ^/v2/(.*)$ /$1 break;
    try_files $uri $uri/ /index.html;
  }

  # Safety: redirect bare root to /v2/
  location = / {
    return 302 /v2/;
  }
}
