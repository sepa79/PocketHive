id: local-rest-with-multi-generators
name: Local REST - Multi Generators
description: Uses local images. Sample REST scenario that ships two generator bees with distinct payloads, rate limits, and an expected 10% beta generator failure rate.
template:
  image: swarm-controller:latest
  bees:
    - role: generator
      image: generator:latest
      env:
        POCKETHIVE_WORKERS_GENERATOR_CONFIG_RATEPERSEC: "30"
        POCKETHIVE_WORKERS_GENERATOR_CONFIG_MESSAGE_PATH: "/api/test-alpha"
        POCKETHIVE_WORKERS_GENERATOR_CONFIG_MESSAGE_METHOD: "POST"
        POCKETHIVE_WORKERS_GENERATOR_CONFIG_MESSAGE_BODY: "hello-from-generator-a"
      work:
        out: gen
    - role: generator
      image: generator:latest
      env:
        POCKETHIVE_WORKERS_GENERATOR_CONFIG_RATEPERSEC: "70"
        POCKETHIVE_WORKERS_GENERATOR_CONFIG_MESSAGE_PATH: "/api/test-beta"
        POCKETHIVE_WORKERS_GENERATOR_CONFIG_MESSAGE_METHOD: "POST"
        POCKETHIVE_WORKERS_GENERATOR_CONFIG_MESSAGE_BODY: "hello-from-generator-b"
      work:
        out: gen
    - role: moderator
      image: moderator:latest
      work:
        in: gen
        out: mod
    - role: processor
      image: processor:latest
      work:
        in: mod
        out: final
    - role: postprocessor
      image: postprocessor:latest
      work:
        in: final
