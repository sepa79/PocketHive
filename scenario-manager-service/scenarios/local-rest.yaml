id: local-rest
name: Local REST - Simple REST Swarm using custom values
description: Uses local images. Sample scenario that ships the REST generator with a 50 msg/s default rate limit.
template:
  image: swarm-controller:latest
  bees:
    - role: sampleGenerator
      image: generator:latest
      config:
        ratePerSec: 50
        singleRequest: false
        message:
          path: /test
          method: POST
          body: '{"event":"local-rest"}'
          headers:
            content-type: application/json
      work:
        out: gen
    - role: sampleModerator
      image: moderator:latest
      config:
        mode:
          type: rate-per-sec
          ratePerSec: 25
          sine:
            minRatePerSec: 5
            maxRatePerSec: 30
            periodSeconds: 60
            phaseOffsetSeconds: 5
      work:
        in: gen
        out: mod
    - role: sampleProcessor
      image: processor:latest
      config:
        baseUrl: http://wiremock:8080/api
      work:
        in: mod
        out: final
    - role: samplePostprocessor
      image: postprocessor:latest
      config:
        publishAllMetrics: true
      work:
        in: final
