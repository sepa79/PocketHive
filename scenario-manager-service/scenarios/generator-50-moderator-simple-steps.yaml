id: generator-50-moderator-simple-steps
name: Generator50-ModeratorSimpleSteps
description: Generator at 50 rps with moderator cycling through flat, ramp, sinus, and duty steps every minute, jitter disabled.
template:
  image: pockethive-swarm-controller:latest
  bees:
    - role: generator
      image: pockethive-generator:latest
      env:
        POCKETHIVE_CONTROL_PLANE_WORKER_GENERATOR_RATE_PER_SEC: "50"
      work:
        out: gen
    - role: moderator
      image: pockethive-moderator:latest
      env:
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_ENABLED: "true"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_TIME_MODE: "warp"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_TIME_WARP_FACTOR: "1"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_TIME_TZ: "UTC"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_RUN_TOTAL_TIME: "PT1H"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_DURATION: "PT4M"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_BASE_RATE_RPS: "50"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_REPEAT_ENABLED: "true"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_REPEAT_UNTIL: "total_time"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_REPEAT_ALIGN: "from_start"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_0_ID: "flat"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_0_RANGE_UNIT: "percent"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_0_RANGE_START_PCT: "0"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_0_RANGE_END_PCT: "25"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_0_MODE: "flat"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_0_PARAMS_FACTOR: "0.6"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_0_TRANSITION_TYPE: "none"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_1_ID: "ramp"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_1_RANGE_UNIT: "percent"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_1_RANGE_START_PCT: "25"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_1_RANGE_END_PCT: "50"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_1_MODE: "ramp"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_1_PARAMS_FROM: "0.6"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_1_PARAMS_TO: "1.0"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_1_TRANSITION_TYPE: "none"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_2_ID: "sinus"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_2_RANGE_UNIT: "percent"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_2_RANGE_START_PCT: "50"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_2_RANGE_END_PCT: "75"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_2_MODE: "sinus"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_2_PARAMS_CENTER: "1.0"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_2_PARAMS_AMPLITUDE: "0.25"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_2_PARAMS_CYCLES: "1.0"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_2_PARAMS_PHASE: "0.0"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_2_TRANSITION_TYPE: "none"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_3_ID: "duty"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_3_RANGE_UNIT: "percent"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_3_RANGE_START_PCT: "75"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_3_RANGE_END_PCT: "100"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_3_MODE: "duty"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_3_PARAMS_ON_MS: "30000"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_3_PARAMS_OFF_MS: "30000"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_3_PARAMS_HIGH: "1.2"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_3_PARAMS_LOW: "0.4"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_PATTERN_STEPS_3_TRANSITION_TYPE: "none"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_NORMALIZATION_ENABLED: "true"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_NORMALIZATION_TOLERANCE_PCT: "5"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_JITTER_TYPE: "none"
        POCKETHIVE_CONTROL_PLANE_WORKER_MODERATOR_SEEDS_DEFAULT_SEED: "scenario/mod/default"
      work:
        in: gen
        out: mod
    - role: processor
      image: pockethive-processor:latest
      work:
        in: mod
        out: final
    - role: postprocessor
      image: pockethive-postprocessor:latest
      work:
        in: final
