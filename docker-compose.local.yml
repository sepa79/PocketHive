services:
  log-aggregator:
    build:
      context: .
      args:
        RUNTIME_IMAGE: ${POCKETHIVE_RUNTIME_IMAGE:-pockethive-jvm-base:latest}
      dockerfile: log-aggregator-service/Dockerfile.runtime

  scenario-manager:
    build:
      context: .
      args:
        RUNTIME_IMAGE: ${POCKETHIVE_RUNTIME_IMAGE:-pockethive-jvm-base:latest}
      dockerfile: scenario-manager-service/Dockerfile.runtime

  orchestrator:
    build:
      context: .
      args:
        RUNTIME_IMAGE: ${POCKETHIVE_RUNTIME_IMAGE:-pockethive-jvm-base:latest}
      dockerfile: orchestrator-service/Dockerfile.runtime

  swarm-controller:
    build:
      context: .
      args:
        RUNTIME_IMAGE: ${POCKETHIVE_RUNTIME_IMAGE:-pockethive-jvm-base:latest}
      dockerfile: Dockerfile.bees.local
      target: swarm-controller

  generator:
    build:
      context: .
      args:
        RUNTIME_IMAGE: ${POCKETHIVE_RUNTIME_IMAGE:-pockethive-jvm-base:latest}
      dockerfile: Dockerfile.bees.local
      target: generator

  moderator:
    build:
      context: .
      args:
        RUNTIME_IMAGE: ${POCKETHIVE_RUNTIME_IMAGE:-pockethive-jvm-base:latest}
      dockerfile: Dockerfile.bees.local
      target: moderator

  processor:
    build:
      context: .
      args:
        RUNTIME_IMAGE: ${POCKETHIVE_RUNTIME_IMAGE:-pockethive-jvm-base:latest}
      dockerfile: Dockerfile.bees.local
      target: processor

  postprocessor:
    build:
      context: .
      args:
        RUNTIME_IMAGE: ${POCKETHIVE_RUNTIME_IMAGE:-pockethive-jvm-base:latest}
      dockerfile: Dockerfile.bees.local
      target: postprocessor

  trigger:
    build:
      context: .
      args:
        RUNTIME_IMAGE: ${POCKETHIVE_RUNTIME_IMAGE:-pockethive-jvm-base:latest}
      dockerfile: Dockerfile.bees.local
      target: trigger
