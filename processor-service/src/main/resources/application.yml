spring:
  application.name: processor-service
  rabbitmq:
    host: ${RABBITMQ_HOST:rabbitmq}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_DEFAULT_USER:guest}
    password: ${RABBITMQ_DEFAULT_PASS:guest}

# Include traceId from MDC in log output
logging:
  config: classpath:logback-spring.xml
  pattern.level: "%5p [%X{traceId}]"

pockethive:
  control-plane:
    swarm-id: ${POCKETHIVE_CONTROL_PLANE_SWARM_ID:default}
    queues:
      generator: ${POCKETHIVE_CONTROL_PLANE_QUEUES_GENERATOR:ph.${pockethive.control-plane.swarm-id}.gen}
      moderator: ${POCKETHIVE_CONTROL_PLANE_QUEUES_MODERATOR:ph.${pockethive.control-plane.swarm-id}.mod}
      final: ${POCKETHIVE_CONTROL_PLANE_QUEUES_FINAL:ph.${pockethive.control-plane.swarm-id}.final}
    worker:
      role: processor
      # Expect POCKETHIVE_CONTROL_PLANE_WORKER_INSTANCE_ID to supply the instance id
      instance-id: ${POCKETHIVE_CONTROL_PLANE_WORKER_INSTANCE_ID}
      skip-self-signals: false
      processor:
        base-url: ${PH_BASE_URL:http://wiremock:8080}
    manager:
      enabled: false
