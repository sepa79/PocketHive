spring:
  application.name: log-aggregator
  rabbitmq:
    host: ${RABBITMQ_HOST:rabbitmq}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_DEFAULT_USER:guest}
    password: ${RABBITMQ_DEFAULT_PASS:guest}
    listener:
      simple:
        auto-declare: false
        missing-queues-fatal: true
management.endpoints.web.exposure.include: health,info,prometheus
logging:
  pattern.level: "%5p [%X{traceId}]"

pockethive:
  logs:
    queue: ${POCKETHIVE_LOGS_QUEUE:${ph.logsQueue:${PH_LOGS_QUEUE:ph.logs.agg}}}
  loki:
    url: ${POCKETHIVE_LOKI_URL:${ph.loki.url:${PH_LOKI_URL:http://loki:3100}}}
    max-retries: ${POCKETHIVE_LOKI_MAX_RETRIES:${ph.loki.maxRetries:${PH_LOKI_MAX_RETRIES:3}}}
    backoff-ms: ${POCKETHIVE_LOKI_BACKOFF_MS:${ph.loki.backoffMs:${PH_LOKI_BACKOFF_MS:500}}}
    batch-size: ${POCKETHIVE_LOKI_BATCH_SIZE:${ph.loki.batchSize:${PH_LOKI_BATCH_SIZE:100}}}
    flush-interval-ms: ${POCKETHIVE_LOKI_FLUSH_INTERVAL_MS:${ph.loki.flushIntervalMs:${PH_LOKI_FLUSH_INTERVAL_MS:1000}}}
